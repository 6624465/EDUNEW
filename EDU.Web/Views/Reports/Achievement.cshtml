@model IEnumerable<EDU.Web.ViewModels.ReportsModel.ProductTotalRevenueVM>

@{
    ViewBag.Title = "Achievement";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var CountryData = (List<EZY.EDU.Contract.Branch>)ViewData["CountryData"];

}

<div class="page page-forms-elements">
    <div class="page-wrap">
        <div class="panel panel-default">
            <div class="box" id="grid">
                <div class="box-header">
                    <h4>PRODUCT - Achievement  YTD</h4>
                    <div class="box-tools">
                    </div>
                </div>
                <div class="box-body">
                    <div class="row css10">
                        <div class="form-group">
                            <label class="col-md-1 control-label">
                                <span class="pull-right">Year</span>
                            </label>
                            <div class="col-md-2">
                                @Html.DropDownListFor(x => x.FirstOrDefault().Year, Enumerable.Range(2017, 14).Select(i => new SelectListItem { Text = i.ToString(), Value = i.ToString() }), "Select Year ", new { @class = "form-control input-sm", onchange = "ChangeMonth();" })
                            </div>
                        </div>
                    </div>
                    <div class="row css10">
                        <div class="col-md-12">
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div id="jqChartdoughnut"></div>
                                    </div>
                                </div>
                                <div class="row css10">
                                    <div class="col-md-12">
                                        <div id="jqChart"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-md-6 css10">
                                        <div id="jqChart0" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart1" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart2" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart3" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart4" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart5" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart6" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart7" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart8" style="height: 150px; width: 100%;"></div>
                                    </div>
                                    <div class="col-md-6 css10">
                                        <div id="jqChart9" style="height: 150px; width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section SectionScripts {

    <script lang="javascript" type="text/javascript">
        $(function () {
            $('#liReportsAchievement').addClass('active');
        });
        function ChangeMonth() {
            window.location = '@Url.Action("Achievement", "Reports", new { year = "" })' + '?year=' + $('#Year').val();
        };
        $(document).ready(function () {
            var background = {
                type: 'linearGradient',
                x0: 0,
                y0: 0,
                x1: 0,
                y1: 1,
                colorStops: [{ offset: 0, color: '#d2e6c9' },
                { offset: 1, color: 'white' }]
            };

            $('#jqChartdoughnut').jqChart({
                title: { text: 'Products' },
                legend: { title: 'Products' },
                border: { strokeStyle: '#6ba851' },
                background: background,
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                series: [
                    {
                        type: 'doughnut',
                        innerExtent: 0.5,
                        outerExtent: 1.0,
                        fillStyles: [   '#418CF0', '#FCB441', '#E0400A', '#056492', '#1A3B69','#0000FF',
		                                '#8A2BE2', '#A52A2A', '#DEB887', '#5F9EA0', '#D2691E','#FF7F50',
		                                '#6495ED', '#DC143C', '#00FFFF', '#00008B', '#008B8B','#B8860B',
		                                '#006400', '#8B008B', '#556B2F', '#FF8C00', '#8B0000','#FF1493',
		                                '#1E90FF', '#B22222', '#228B22', '#008000', '#4B0082','#F08080',
		                                '#00FF00', '#0000CD', '#FF4500', '#800080', '#9ACD32','#008080',
                                       ],
                        labels: {
                            stringFormat: '%.1f%%',
                            valueType: 'percentage',
                            font: '15px sans-serif',
                            fillStyle: 'white'
                        },
                        data: [ @foreach (var item in Model.GroupBy(x=>x.ProductName).ToList())
                        {
                            <text>
                                [
                                    '@item.FirstOrDefault().ProductName',
                                    @item.Sum(a=>a.AchievedRevenue)
                                ],
                            </text>
                        }]
                    }
                ]
            });

            $('#jqChart').jqChart({
                title: { text: '' },
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                legend: {
                    visible: false,
                    //allowHideSeries: true,
                    //location: 'right',
                    //title: {
                    //    text: 'Legend Title',
                    //    font: '14px sans-serif',
                    //    fillStyle: 'red'
                    //},
                    //border: {
                    //    lineWidth: 2,
                    //    strokeStyle: 'green'
                    //},
                    //font: '12px sans-serif',
                    //textFillStyle: '#418CF0',
                    //background: '#eeeeee',
                    //margin: 10
                },
                axes: [
                    {
                        type: 'category',
                        location: 'bottom',
                        categories: [
                                        @foreach (var item in Model.GroupBy(x => x.ProductName).ToList())
                                        {
                                               <text>
                                             '@item.FirstOrDefault().ProductName',
                                                 </text>
                                         }
                                    ],
                        labels: {
                            font: '12px sans-serif',
                            angle: -45
                        }
                    }
                ],
                series: [
                    {
                        type: 'column',
                        fillStyles: ['#418CF0', '#FCB441', '#E0400A', '#056492', '#1A3B69'],
                        data:[
                         @foreach (var info in Model.GroupBy(x => x.ProductName).ToList())
                         {
                        <text>
                                @info.Sum(a => a.AchievedRevenue),
                        </text>
                        }
                        ]
                    }
                ]
            });

            var count = 0;
            @foreach (var item in CountryData)
                {
                   <text>
            $('#jqChart'+count).jqChart({
                title: { text: '@item.BranchName' },
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                legend: {
                    visible: true,
                    allowHideSeries: true,
                    location: 'right',
                    customItems: [
                          //{
                          //    text: 'No. of Issues: 25',
                          //    marker: { visible: false }
                          //},
                             
                             @foreach (var info in Model.Where(x => x.Country == item.BranchID).ToList())
                             {
                                                <text>
                                                     {
                                                         text: {
                                                             text: '@info.ProductName',
                                                         },
                                                         marker: {
                                                             type: 'rectangle'
                                                         }
                                                     },
                                                  </text>
                                       
                             }
                               
                        ],
                    title: {
                        text: 'Products',
                        font: '14px sans-serif',
                        fillStyle: 'red'
                    },
                    border: {
                        lineWidth: 2,
                        strokeStyle: 'green'
                    },
                    font: '12px sans-serif',
                    textFillStyle: [ '#418CF0', '#FCB441', '#E0400A', '#056492', '#1A3B69','#0000FF',
		                                '#8A2BE2', '#A52A2A', '#DEB887', '#5F9EA0', '#D2691E','#FF7F50',
		                                '#6495ED', '#DC143C', '#00FFFF', '#00008B', '#008B8B','#B8860B',
		                                '#006400', '#8B008B', '#556B2F', '#FF8C00', '#8B0000','#FF1493',
		                                '#1E90FF', '#B22222', '#228B22', '#008000', '#4B0082','#F08080',
		                                '#00FF00', '#0000CD', '#FF4500', '#800080', '#9ACD32','#008080',
                             ],
                    background: '#eeeeee',
                    margin: 10
                },
                axes: [
                    {
                        type: 'category',
                        location: 'bottom',
                        categories: [
                                        @foreach (var info in Model.Where(x => x.Country == item.BranchID).ToList())
                                          {
                                               <text>
                                             '@info.ProductName',
                                                 </text>
                                         }
                                    ],
                        labels: {
                            font: '12px sans-serif',
                            angle: -45
                        }
                    }
                ],
                series: [
                    {
                        type: 'column',
                        fillStyles: ['#418CF0', '#FCB441', '#E0400A', '#056492', '#1A3B69'],
                        data:[
                         @foreach (var info in Model.Where(x => x.Country == item.BranchID).ToList())
                        {
                        <text>
                                @info.AchievedRevenue,
                        </text>
                        }
                        ]
                    }
                ]
            });
            count++;
            </text>
        }

        });
    </script>
}














































































